<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Black Opal — The Dance</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r160/three.min.js"></script>

  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <style>
    /* === Reset === */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* === Custom Properties === */
    :root {
      --black: #0a0a0a;
      --magenta: #c2185b;
      --orange: #e65100;
      --gold: #ffab00;
      --blue-deep: #1a237e;
      --silver: #b0bec5;
      --dawn: #ffccbc;
      --white: #f5f5f5;
    }

    /* === Base === */
    html {
      scroll-behavior: smooth;
    }

    body {
      background: var(--black);
      color: var(--white);
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* === WebGL Canvas === */
    #bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    /* === Sections === */
    section {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* === Typography === */
    .headline {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 5vw, 4.5rem);
      font-weight: 700;
      line-height: 1.1;
      letter-spacing: 0.04em;
    }

    .body-text {
      font-family: 'Inter', sans-serif;
      font-size: clamp(0.95rem, 1.2vw, 1.15rem);
      font-weight: 300;
      line-height: 1.8;
      max-width: 700px;
    }

    .accent {
      font-family: 'Playfair Display', serif;
      font-style: italic;
    }

    /* === Portal / Hero === */
    #portal {
      min-height: 100vh;
      flex-direction: column;
      padding: 2rem;
      text-align: center;
    }

    .portal-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
    }

    .logo-svg {
      width: clamp(80px, 12vw, 140px);
      height: auto;
      opacity: 0;
    }

    .logo-svg path,
    .logo-svg line {
      stroke: var(--white);
      stroke-width: 1.5;
      fill: none;
      stroke-dasharray: 500;
      stroke-dashoffset: 500;
    }

    .portal-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(3rem, 8vw, 7rem);
      font-weight: 700;
      letter-spacing: 0.15em;
      line-height: 1.05;
      opacity: 0;
    }

    .portal-title span {
      display: block;
    }

    .portal-subtitle {
      font-family: 'Inter', sans-serif;
      font-size: clamp(0.7rem, 1.2vw, 0.95rem);
      font-weight: 300;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      opacity: 0;
    }

    .portal-tagline {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: clamp(1rem, 2vw, 1.4rem);
      max-width: 500px;
      opacity: 0;
      color: rgba(245, 245, 245, 0.8);
    }

    .vertical-text {
      position: fixed;
      left: 1.5rem;
      top: 50%;
      transform: rotate(-90deg) translateX(-50%);
      transform-origin: left center;
      font-family: 'Inter', sans-serif;
      font-size: 0.6rem;
      font-weight: 300;
      letter-spacing: 0.35em;
      text-transform: uppercase;
      color: rgba(245, 245, 245, 0.4);
      white-space: nowrap;
      z-index: 10;
      opacity: 0;
    }

    /* === Reveal === */
    #reveal {
      height: 300vh;
      min-height: auto;
      align-items: flex-start;
    }

    .reveal-sticky {
      position: sticky;
      top: 0;
      height: 100vh;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0;
    }

    .reveal-line {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.4rem, 3.5vw, 2.8rem);
      text-align: center;
      max-width: 700px;
      padding: 0 2rem;
      opacity: 0;
      position: absolute;
    }

    /* === Vision === */
    #vision {
      height: 200vh;
      min-height: auto;
      align-items: flex-start;
    }

    .vision-sticky {
      position: sticky;
      top: 0;
      height: 100vh;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .vision-content {
      max-width: 800px;
      padding: 2rem;
      text-align: center;
    }

    .vision-content .headline {
      opacity: 0;
      margin-bottom: 1rem;
    }

    .vision-rule {
      width: 80px;
      height: 1px;
      background: var(--white);
      margin: 1.5rem auto;
      transform: scaleX(0);
    }

    .vision-sub {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.1rem, 2vw, 1.5rem);
      font-weight: 400;
      margin-bottom: 2rem;
      opacity: 0;
    }

    .vision-para {
      opacity: 0;
      margin-bottom: 1.5rem;
    }

    .vision-divider {
      display: block;
      text-align: center;
      color: rgba(245, 245, 245, 0.3);
      font-size: 0.8rem;
      letter-spacing: 1em;
      margin: 1.5rem 0;
      opacity: 0;
    }

    .vision-closing {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: clamp(1.1rem, 2vw, 1.4rem);
      opacity: 0;
      text-shadow: 0 0 0px transparent;
    }
  </style>
</head>
<body>

  <canvas id="bg"></canvas>

  <!-- Vertical side text — persists through multiple sections -->
  <div class="vertical-text">An Immersive High-Art Luxury Experience</div>

  <section id="portal">
    <div class="portal-container">
      <!-- Black Opal Logo — eye/diamond motif -->
      <svg class="logo-svg" viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
        <!-- Outer eye shape -->
        <path d="M10,50 Q60,5 110,50 Q60,95 10,50 Z" />
        <!-- Inner diamond -->
        <path d="M60,25 L80,50 L60,75 L40,50 Z" />
        <!-- Central circle -->
        <circle cx="60" cy="50" r="8" stroke-width="1.5" fill="none" />
        <!-- Radiating lines -->
        <line x1="60" y1="15" x2="60" y2="25" />
        <line x1="60" y1="75" x2="60" y2="85" />
        <line x1="25" y1="50" x2="40" y2="50" />
        <line x1="80" y1="50" x2="95" y2="50" />
        <!-- Diagonal rays -->
        <line x1="38" y1="30" x2="45" y2="38" />
        <line x1="82" y1="30" x2="75" y2="38" />
        <line x1="38" y1="70" x2="45" y2="62" />
        <line x1="82" y1="70" x2="75" y2="62" />
      </svg>

      <h1 class="portal-title">
        <span>BLACK</span>
        <span>OPAL</span>
      </h1>

      <p class="portal-subtitle">The Dance</p>

      <p class="portal-tagline accent">"An intelligent species has been evolving beside us&hellip;"</p>
    </div>
  </section>
  <section id="reveal">
    <div class="reveal-sticky">
      <p class="reveal-line reveal-line-1">"For one night they invite us inside."</p>
      <p class="reveal-line reveal-line-2">"What we find changes how we see the future."</p>
      <p class="reveal-line reveal-line-3">"This is not entertainment you watch."</p>
    </div>
  </section>
  <section id="vision">
    <div class="vision-sticky">
      <div class="vision-content">
        <h2 class="headline">WHAT IS BLACK OPAL?</h2>
        <div class="vision-rule"></div>
        <p class="vision-sub">An Immersive Dinner Theater Experience Unlike Anything on Earth.</p>
        <p class="body-text vision-para">Black Opal is a next-generation immersive dinner theater experience designed for a high-net-worth audience. Set within a fully controlled environment, robotics and live performers move seamlessly through the space, transforming the meal into a cinematic progression of moments.</p>
        <span class="vision-divider">&diams;</span>
        <p class="body-text vision-para">Intimate, unexpected, and emotionally charged. Every course unfolds as part of the story. Every interaction feels personal. No two guests leave with the same experience.</p>
        <span class="vision-divider">&diams;</span>
        <p class="vision-closing accent">"Black Opal is not entertainment you watch. It's entertainment that surrounds you."</p>
      </div>
    </div>
  </section>
  <section id="tribes"></section>
  <section id="fork"></section>
  <section id="table"></section>
  <section id="horizon"></section>
  <section id="encounter"></section>
  <section id="contact"></section>
  <section id="inner-circle"></section>

  <script>
    // =============================================
    // GSAP ScrollTrigger Registration
    // =============================================
    gsap.registerPlugin(ScrollTrigger);

    // Global scroll progress (0-1) for particle color shifts
    let scrollProgress = 0;
    ScrollTrigger.create({
      trigger: 'body',
      start: 'top top',
      end: 'bottom bottom',
      onUpdate: self => { scrollProgress = self.progress; }
    });

    // =============================================
    // Three.js Particle Background
    // =============================================
    (function() {
      const canvas = document.getElementById('bg');
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 200);
      camera.position.z = 50;

      const renderer = new THREE.WebGLRenderer({
        canvas: canvas,
        alpha: true,
        antialias: true
      });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

      // Particle count — reduced on low-end devices
      const PARTICLE_COUNT = (navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4) ? 1500 : 3000;

      // Create particles in a sphere distribution
      const geometry = new THREE.BufferGeometry();
      const positions = new Float32Array(PARTICLE_COUNT * 3);
      const colors = new Float32Array(PARTICLE_COUNT * 3);

      for (let i = 0; i < PARTICLE_COUNT; i++) {
        // Random point in sphere (radius ~50)
        const radius = 50 * Math.cbrt(Math.random());
        const theta = Math.random() * Math.PI * 2;
        const phi = Math.acos(2 * Math.random() - 1);

        positions[i * 3]     = radius * Math.sin(phi) * Math.cos(theta);
        positions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta);
        positions[i * 3 + 2] = radius * Math.cos(phi);

        // Start white
        colors[i * 3]     = 1.0;
        colors[i * 3 + 1] = 1.0;
        colors[i * 3 + 2] = 1.0;
      }

      geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
      geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

      const material = new THREE.PointsMaterial({
        vertexColors: true,
        transparent: true,
        opacity: 0.6,
        size: 0.08,
        sizeAttenuation: true
      });

      const points = new THREE.Points(geometry, material);
      scene.add(points);

      // Color palette for scroll interpolation
      const colorStops = [
        new THREE.Color(0xf5f5f5), // white
        new THREE.Color(0xc2185b), // magenta
        new THREE.Color(0xe65100), // orange
        new THREE.Color(0xffab00)  // gold
      ];

      function lerpColor(progress) {
        const scaledP = progress * (colorStops.length - 1);
        const idx = Math.min(Math.floor(scaledP), colorStops.length - 2);
        const t = scaledP - idx;
        const c = new THREE.Color();
        c.lerpColors(colorStops[idx], colorStops[idx + 1], t);
        return c;
      }

      // Animation loop
      function animate() {
        requestAnimationFrame(animate);

        // Gentle rotation
        points.rotation.y += 0.0003;
        points.rotation.x += 0.0001;

        // Update colors based on scroll progress
        const baseColor = lerpColor(scrollProgress);
        const colAttr = geometry.getAttribute('color');
        for (let i = 0; i < PARTICLE_COUNT; i++) {
          // Slight per-particle variation for organic feel
          const variation = 0.9 + Math.sin(i * 0.1 + scrollProgress * 5) * 0.1;
          colAttr.array[i * 3]     = baseColor.r * variation;
          colAttr.array[i * 3 + 1] = baseColor.g * variation;
          colAttr.array[i * 3 + 2] = baseColor.b * variation;
        }
        colAttr.needsUpdate = true;

        // Slight scale shift with scroll (geometry spreads out)
        const scale = 1 + scrollProgress * 0.3;
        points.scale.set(scale, scale, scale);

        renderer.render(scene, camera);
      }

      animate();

      // Resize handler
      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      });
    })();

    // =============================================
    // Portal — Entrance Animations
    // =============================================
    (function() {
      const tl = gsap.timeline({ defaults: { ease: 'power3.out' } });

      // Logo SVG draws in (stroke-dashoffset 500 → 0)
      tl.to('.logo-svg', { opacity: 1, duration: 0.3 })
        .to('.logo-svg path, .logo-svg line, .logo-svg circle', {
          strokeDashoffset: 0,
          duration: 1.5,
          stagger: 0.08,
          ease: 'power2.inOut'
        }, '<')
        // Title fades up, staggered per span
        .to('.portal-title', { opacity: 1, duration: 0.1 }, '-=0.8')
        .from('.portal-title span', {
          y: 30,
          opacity: 0,
          duration: 1,
          stagger: 0.15,
          ease: 'power3.out'
        }, '-=0.8')
        // Subtitle fades in
        .to('.portal-subtitle', {
          opacity: 1,
          duration: 0.8,
          ease: 'power2.out'
        }, '-=0.3')
        // Tagline fades in
        .to('.portal-tagline', {
          opacity: 1,
          duration: 1,
          ease: 'power2.out'
        }, '-=0.2')
        // Vertical side text fades in with tagline
        .to('.vertical-text', {
          opacity: 0.4,
          duration: 1,
          ease: 'power2.out'
        }, '<');
    })();

    // =============================================
    // Reveal — Scroll-driven text sequence
    // =============================================
    (function() {
      const revealTl = gsap.timeline({
        scrollTrigger: {
          trigger: '#reveal',
          start: 'top top',
          end: 'bottom bottom',
          scrub: 1
        }
      });

      // First third: line 1 fades in, holds, fades out
      revealTl
        .fromTo('.reveal-line-1',
          { opacity: 0, y: 40 },
          { opacity: 1, y: 0, duration: 1 }
        )
        .to('.reveal-line-1', { opacity: 1, duration: 0.5 })
        .to('.reveal-line-1', { opacity: 0, duration: 0.5 })
        // Second third: line 2 fades in, holds, fades out
        .fromTo('.reveal-line-2',
          { opacity: 0, y: 40 },
          { opacity: 1, y: 0, duration: 1 }
        )
        .to('.reveal-line-2', { opacity: 1, duration: 0.5 })
        .to('.reveal-line-2', { opacity: 0, duration: 0.5 })
        // Final third: line 3 fades in and stays
        .fromTo('.reveal-line-3',
          { opacity: 0, y: 40 },
          { opacity: 1, y: 0, duration: 1 }
        )
        .to('.reveal-line-3', { opacity: 1, duration: 1 });
    })();

    // =============================================
    // Vision — Scroll-animated prose
    // =============================================
    (function() {
      const visionTl = gsap.timeline({
        scrollTrigger: {
          trigger: '#vision',
          start: 'top top',
          end: 'bottom bottom',
          scrub: 1
        }
      });

      visionTl
        // Headline slides in from left
        .fromTo('.vision-content .headline',
          { opacity: 0, x: -60 },
          { opacity: 1, x: 0, duration: 1 }
        )
        // Rule expands from center
        .to('.vision-rule', { scaleX: 1, duration: 0.8 }, '-=0.5')
        // Sub-headline
        .to('.vision-sub', { opacity: 1, duration: 0.8 }, '-=0.3')
        // Paragraphs fade in sequentially
        .to('.vision-para', { opacity: 1, duration: 1, stagger: 0.5 })
        // Dividers
        .to('.vision-divider', { opacity: 1, duration: 0.5, stagger: 0.3 }, '-=1.5')
        // Closing italic with gold glow
        .to('.vision-closing', {
          opacity: 1,
          textShadow: '0 0 30px rgba(255, 171, 0, 0.4)',
          duration: 1.2
        });
    })();
  </script>

</body>
</html>
