<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Black Opal — The Dance</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

  <!-- Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <style>
    /* === Reset === */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* === Custom Properties === */
    :root {
      --black: #0a0a0a;
      --magenta: #c2185b;
      --orange: #e65100;
      --gold: #ffab00;
      --blue-deep: #1a237e;
      --silver: #b0bec5;
      --dawn: #ffccbc;
      --white: #f5f5f5;
    }

    /* === Base === */
    html {
      scroll-behavior: smooth;
    }

    body {
      background: var(--black);
      color: var(--white);
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* === WebGL Canvas === */
    #bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    /* === Sections === */
    section {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* === Typography === */
    .headline {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 5vw, 4.5rem);
      font-weight: 700;
      line-height: 1.1;
      letter-spacing: 0.04em;
    }

    .body-text {
      font-family: 'Inter', sans-serif;
      font-size: clamp(0.95rem, 1.2vw, 1.15rem);
      font-weight: 300;
      line-height: 1.8;
      max-width: 700px;
    }

    .accent {
      font-family: 'Playfair Display', serif;
      font-style: italic;
    }

    /* === Portal / Hero === */
    #portal {
      min-height: 100vh;
      flex-direction: column;
      padding: 2rem;
      text-align: center;
    }

    .portal-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
    }

    .logo-svg {
      width: clamp(80px, 12vw, 140px);
      height: auto;
      opacity: 0;
    }

    .logo-svg path,
    .logo-svg line {
      stroke: var(--white);
      stroke-width: 1.5;
      fill: none;
      stroke-dasharray: 500;
      stroke-dashoffset: 500;
    }

    .portal-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(3rem, 8vw, 7rem);
      font-weight: 700;
      letter-spacing: 0.15em;
      line-height: 1.05;
      opacity: 0;
    }

    .portal-title span {
      display: block;
    }

    .portal-subtitle {
      font-family: 'Inter', sans-serif;
      font-size: clamp(0.7rem, 1.2vw, 0.95rem);
      font-weight: 300;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      opacity: 0;
    }

    .portal-tagline {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: clamp(1rem, 2vw, 1.4rem);
      max-width: 500px;
      opacity: 0;
      color: rgba(245, 245, 245, 0.8);
    }

    .vertical-text {
      position: fixed;
      left: 1.5rem;
      top: 50%;
      transform: rotate(-90deg) translateX(-50%);
      transform-origin: left center;
      font-family: 'Inter', sans-serif;
      font-size: 0.6rem;
      font-weight: 300;
      letter-spacing: 0.35em;
      text-transform: uppercase;
      color: rgba(245, 245, 245, 0.4);
      white-space: nowrap;
      z-index: 10;
      opacity: 0;
    }

    /* === Reveal === */
    #reveal {
      height: 300vh;
      min-height: auto;
      align-items: flex-start;
    }

    .reveal-sticky {
      position: sticky;
      top: 0;
      height: 100vh;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0;
    }

    .reveal-line {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.4rem, 3.5vw, 2.8rem);
      text-align: center;
      max-width: 700px;
      padding: 0 2rem;
      opacity: 0;
      position: absolute;
    }

    /* === Vision === */
    #vision {
      height: 200vh;
      min-height: auto;
      align-items: flex-start;
    }

    .vision-sticky {
      position: sticky;
      top: 0;
      height: 100vh;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .vision-content {
      max-width: 800px;
      padding: 2rem;
      text-align: center;
    }

    .vision-content .headline {
      opacity: 0;
      margin-bottom: 1rem;
    }

    .vision-rule {
      width: 80px;
      height: 1px;
      background: var(--white);
      margin: 1.5rem auto;
      transform: scaleX(0);
    }

    .vision-sub {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.1rem, 2vw, 1.5rem);
      font-weight: 400;
      margin-bottom: 2rem;
      opacity: 0;
    }

    .vision-para {
      opacity: 0;
      margin-bottom: 1.5rem;
    }

    .vision-divider {
      display: block;
      text-align: center;
      color: rgba(245, 245, 245, 0.3);
      font-size: 0.8rem;
      letter-spacing: 1em;
      margin: 1.5rem 0;
      opacity: 0;
    }

    .vision-closing {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: clamp(1.1rem, 2vw, 1.4rem);
      opacity: 0;
      text-shadow: 0 0 0px transparent;
    }

    /* === Tribes === */
    #tribes {
      flex-direction: column;
      padding: 6rem 2rem;
      gap: 3rem;
    }

    .tribes-header {
      text-align: center;
      max-width: 700px;
      opacity: 0;
    }

    .tribes-header h2 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.6rem, 3.5vw, 2.8rem);
      font-weight: 700;
      margin-bottom: 1rem;
    }

    .tribes-header p {
      font-family: 'Inter', sans-serif;
      font-size: clamp(0.9rem, 1.1vw, 1.05rem);
      font-weight: 300;
      color: rgba(245, 245, 245, 0.7);
    }

    .tribes-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem;
      max-width: 900px;
      width: 100%;
    }

    .tribe-card {
      border: 1px solid rgba(245, 245, 245, 0.12);
      border-radius: 8px;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      text-align: center;
      background: rgba(10, 10, 10, 0.5);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      opacity: 0;
      transform: scale(0.95);
    }

    .tribe-card canvas {
      border-radius: 50%;
    }

    .tribe-card h3 {
      font-family: 'Playfair Display', serif;
      font-size: 1.2rem;
      font-weight: 700;
      letter-spacing: 0.08em;
    }

    .tribe-card p {
      font-family: 'Inter', sans-serif;
      font-size: 0.85rem;
      font-weight: 300;
      color: rgba(245, 245, 245, 0.65);
    }

    /* === Fork === */
    #fork {
      height: 150vh;
      min-height: auto;
      align-items: flex-start;
    }

    .fork-sticky {
      position: sticky;
      top: 0;
      height: 100vh;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      padding: 2rem;
    }

    .fork-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.8rem, 4vw, 3.2rem);
      font-weight: 700;
      text-align: center;
      opacity: 0;
    }

    .fork-panels {
      display: flex;
      width: 100%;
      max-width: 1000px;
      height: 50vh;
      gap: 0;
      position: relative;
    }

    .fork-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      padding: 2rem;
      position: relative;
      opacity: 0;
    }

    .fork-panel--table {
      background: radial-gradient(ellipse at center, rgba(255, 171, 0, 0.12) 0%, rgba(194, 24, 91, 0.06) 50%, transparent 80%);
    }

    .fork-panel--horizon {
      background: radial-gradient(ellipse at center, rgba(26, 35, 126, 0.15) 0%, rgba(176, 190, 197, 0.06) 50%, transparent 80%);
    }

    .fork-panel h3 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.3rem, 2.5vw, 2rem);
      font-weight: 700;
      letter-spacing: 0.1em;
      opacity: 0;
    }

    .fork-panel .fork-teaser {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: clamp(0.85rem, 1.2vw, 1.05rem);
      color: rgba(245, 245, 245, 0.6);
      opacity: 0;
    }

    .fork-divider {
      position: absolute;
      left: 50%;
      top: 15%;
      bottom: 15%;
      width: 1px;
      background: rgba(245, 245, 245, 0.25);
      transform: translateX(-50%);
      z-index: 2;
    }

    .fork-divider::after {
      content: '\25C6';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 0.6rem;
      color: rgba(245, 245, 245, 0.4);
      background: var(--black);
      padding: 0.3rem;
    }

    /* === The Table === */
    #table {
      height: 300vh;
      min-height: auto;
      align-items: flex-start;
    }

    .table-sticky {
      position: sticky;
      top: 0;
      height: 100vh;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .table-content {
      max-width: 750px;
      padding: 2rem;
      width: 100%;
    }

    .table-header {
      text-align: center;
      margin-bottom: 2rem;
      opacity: 0;
    }

    .table-header h2 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 4vw, 3.5rem);
      font-weight: 700;
      letter-spacing: 0.1em;
      color: var(--gold);
      text-shadow: 0 0 40px rgba(255, 171, 0, 0.2);
    }

    .table-header .table-subtitle {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: clamp(0.9rem, 1.3vw, 1.1rem);
      color: rgba(245, 245, 245, 0.6);
      margin-top: 0.5rem;
    }

    .table-intro {
      text-align: center;
      margin-bottom: 2.5rem;
      opacity: 0;
    }

    .table-timeline {
      position: relative;
      padding-left: 2rem;
    }

    .table-timeline-line {
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 1px;
      background: var(--gold);
      transform: scaleY(0);
      transform-origin: top;
    }

    .timeline-step {
      display: flex;
      gap: 1.5rem;
      margin-bottom: 1.2rem;
      opacity: 0;
      transform: translateY(15px);
    }

    .timeline-step .step-label {
      font-family: 'Inter', sans-serif;
      font-size: 0.65rem;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--gold);
      min-width: 110px;
      flex-shrink: 0;
    }

    .timeline-step .step-desc {
      font-family: 'Inter', sans-serif;
      font-size: 0.85rem;
      font-weight: 300;
      color: rgba(245, 245, 245, 0.7);
      line-height: 1.5;
    }

    .table-quote {
      text-align: center;
      margin-top: 2.5rem;
      opacity: 0;
    }

    .table-quote p {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: clamp(1rem, 1.5vw, 1.2rem);
      color: var(--gold);
      text-shadow: 0 0 20px rgba(255, 171, 0, 0.15);
      margin-bottom: 0.8rem;
    }
  </style>
</head>
<body>

  <canvas id="bg"></canvas>

  <!-- Vertical side text — persists through multiple sections -->
  <div class="vertical-text">An Immersive High-Art Luxury Experience</div>

  <section id="portal">
    <div class="portal-container">
      <!-- Black Opal Logo — eye/diamond motif -->
      <svg class="logo-svg" viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
        <!-- Outer eye shape -->
        <path d="M10,50 Q60,5 110,50 Q60,95 10,50 Z" />
        <!-- Inner diamond -->
        <path d="M60,25 L80,50 L60,75 L40,50 Z" />
        <!-- Central circle -->
        <circle cx="60" cy="50" r="8" stroke-width="1.5" fill="none" />
        <!-- Radiating lines -->
        <line x1="60" y1="15" x2="60" y2="25" />
        <line x1="60" y1="75" x2="60" y2="85" />
        <line x1="25" y1="50" x2="40" y2="50" />
        <line x1="80" y1="50" x2="95" y2="50" />
        <!-- Diagonal rays -->
        <line x1="38" y1="30" x2="45" y2="38" />
        <line x1="82" y1="30" x2="75" y2="38" />
        <line x1="38" y1="70" x2="45" y2="62" />
        <line x1="82" y1="70" x2="75" y2="62" />
      </svg>

      <h1 class="portal-title">
        <span>BLACK</span>
        <span>OPAL</span>
      </h1>

      <p class="portal-subtitle">The Dance</p>

      <p class="portal-tagline accent">"An intelligent species has been evolving beside us&hellip;"</p>
    </div>
  </section>
  <section id="reveal">
    <div class="reveal-sticky">
      <p class="reveal-line reveal-line-1">"For one night they invite us inside."</p>
      <p class="reveal-line reveal-line-2">"What we find changes how we see the future."</p>
      <p class="reveal-line reveal-line-3">"This is not entertainment you watch."</p>
    </div>
  </section>
  <section id="vision">
    <div class="vision-sticky">
      <div class="vision-content">
        <h2 class="headline">WHAT IS BLACK OPAL?</h2>
        <div class="vision-rule"></div>
        <p class="vision-sub">An Immersive Dinner Theater Experience Unlike Anything on Earth.</p>
        <p class="body-text vision-para">Black Opal is a next-generation immersive dinner theater experience designed for a high-net-worth audience. Set within a fully controlled environment, robotics and live performers move seamlessly through the space, transforming the meal into a cinematic progression of moments.</p>
        <span class="vision-divider">&diams;</span>
        <p class="body-text vision-para">Intimate, unexpected, and emotionally charged. Every course unfolds as part of the story. Every interaction feels personal. No two guests leave with the same experience.</p>
        <span class="vision-divider">&diams;</span>
        <p class="vision-closing accent">"Black Opal is not entertainment you watch. It's entertainment that surrounds you."</p>
      </div>
    </div>
  </section>
  <section id="tribes">
    <div class="tribes-header">
      <h2>Four Tribes. Four Expressions of Intelligence.</h2>
      <p>Each represents a different philosophy of evolution.</p>
    </div>
    <div class="tribes-grid">
      <div class="tribe-card" data-tribe="luminous">
        <canvas width="200" height="200"></canvas>
        <h3>The Luminous Order</h3>
        <p>Elegance, symmetry, perfection</p>
      </div>
      <div class="tribe-card" data-tribe="wild">
        <canvas width="200" height="200"></canvas>
        <h3>The Wild Current</h3>
        <p>Chaos, color, emotional force</p>
      </div>
      <div class="tribe-card" data-tribe="reclaimers">
        <canvas width="200" height="200"></canvas>
        <h3>The Reclaimers</h3>
        <p>Recycled tech, adaptive survivalists</p>
      </div>
      <div class="tribe-card" data-tribe="witnesses">
        <canvas width="200" height="200"></canvas>
        <h3>The Human Witnesses</h3>
        <p>Us</p>
      </div>
    </div>
  </section>
  <section id="fork">
    <div class="fork-sticky">
      <h2 class="fork-title">Two Stages. One Dance.</h2>
      <div class="fork-panels">
        <div class="fork-panel fork-panel--table">
          <h3>THE TABLE</h3>
          <p class="fork-teaser">The intimate ritual.</p>
        </div>
        <div class="fork-divider"></div>
        <div class="fork-panel fork-panel--horizon">
          <h3>THE HORIZON</h3>
          <p class="fork-teaser">The elemental expanse.</p>
        </div>
      </div>
    </div>
  </section>
  <section id="table">
    <div class="table-sticky">
      <div class="table-content">
        <div class="table-header">
          <h2>THE TABLE</h2>
          <p class="table-subtitle">The Intimate Ritual</p>
        </div>
        <p class="body-text table-intro">An ultra-luxury immersive dinner for 100 guests. Not a show. Not a concert. Not a gala. A choreographed progression where food, music, robotics, light, scent, and performance operate as one organism.</p>
        <div class="table-timeline">
          <div class="table-timeline-line"></div>
          <div class="timeline-step"><span class="step-label">I. The Journey</span><span class="step-desc">Guests depart the ordinary world. The transition begins before they arrive.</span></div>
          <div class="timeline-step"><span class="step-label">II. Arrival</span><span class="step-desc">The environment reads you. Subtle signals shape how the night unfolds.</span></div>
          <div class="timeline-step"><span class="step-label">III. Reception</span><span class="step-desc">First encounters with the tribes. Alliances form over cocktails.</span></div>
          <div class="timeline-step"><span class="step-label">IV. Dinner</span><span class="step-desc">Every course unfolds as part of the story. The table is where civilizations meet.</span></div>
          <div class="timeline-step"><span class="step-label">V. Show</span><span class="step-desc">What felt intimate becomes collective. Light, sound, and movement align into a single gesture.</span></div>
          <div class="timeline-step"><span class="step-label">VI. Chill</span><span class="step-desc">The tension dissolves. Conversations deepen. The experience breathes.</span></div>
          <div class="timeline-step"><span class="step-label">VII. Journey Back</span><span class="step-desc">Return to the world, changed. No two guests leave with the same story.</span></div>
        </div>
        <div class="table-quote">
          <p>"Dinner is not intermission. Dinner is ritual."</p>
          <p>"Technology amplifies hospitality, it does not replace it."</p>
        </div>
      </div>
    </div>
  </section>
  <section id="horizon"></section>
  <section id="encounter"></section>
  <section id="contact"></section>
  <section id="inner-circle"></section>

  <script>
    // =============================================
    // GSAP ScrollTrigger Registration
    // =============================================
    gsap.registerPlugin(ScrollTrigger);

    // Global scroll progress (0-1) for particle color shifts
    let scrollProgress = 0;
    ScrollTrigger.create({
      trigger: 'body',
      start: 'top top',
      end: 'bottom bottom',
      onUpdate: self => { scrollProgress = self.progress; }
    });

    // =============================================
    // Three.js Particle Background
    // =============================================
    (function() {
      const canvas = document.getElementById('bg');
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 200);
      camera.position.z = 50;

      const renderer = new THREE.WebGLRenderer({
        canvas: canvas,
        alpha: true,
        antialias: true
      });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

      // Particle count — reduced on low-end devices
      const PARTICLE_COUNT = (navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4) ? 1500 : 3000;

      // Create particles in a sphere distribution
      const geometry = new THREE.BufferGeometry();
      const positions = new Float32Array(PARTICLE_COUNT * 3);
      const colors = new Float32Array(PARTICLE_COUNT * 3);

      for (let i = 0; i < PARTICLE_COUNT; i++) {
        // Random point in sphere (radius ~50)
        const radius = 50 * Math.cbrt(Math.random());
        const theta = Math.random() * Math.PI * 2;
        const phi = Math.acos(2 * Math.random() - 1);

        positions[i * 3]     = radius * Math.sin(phi) * Math.cos(theta);
        positions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta);
        positions[i * 3 + 2] = radius * Math.cos(phi);

        // Start white
        colors[i * 3]     = 1.0;
        colors[i * 3 + 1] = 1.0;
        colors[i * 3 + 2] = 1.0;
      }

      geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
      geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

      const material = new THREE.PointsMaterial({
        vertexColors: true,
        transparent: true,
        opacity: 0.6,
        size: 0.08,
        sizeAttenuation: true
      });

      const points = new THREE.Points(geometry, material);
      scene.add(points);

      // Color palette for scroll interpolation
      const colorStops = [
        new THREE.Color(0xf5f5f5), // white
        new THREE.Color(0xc2185b), // magenta
        new THREE.Color(0xe65100), // orange
        new THREE.Color(0xffab00)  // gold
      ];

      function lerpColor(progress) {
        const scaledP = progress * (colorStops.length - 1);
        const idx = Math.min(Math.floor(scaledP), colorStops.length - 2);
        const t = scaledP - idx;
        const c = new THREE.Color();
        c.lerpColors(colorStops[idx], colorStops[idx + 1], t);
        return c;
      }

      // Animation loop
      function animate() {
        requestAnimationFrame(animate);

        // Gentle rotation
        points.rotation.y += 0.0003;
        points.rotation.x += 0.0001;

        // Update colors based on scroll progress
        const baseColor = lerpColor(scrollProgress);
        const colAttr = geometry.getAttribute('color');
        for (let i = 0; i < PARTICLE_COUNT; i++) {
          // Slight per-particle variation for organic feel
          const variation = 0.9 + Math.sin(i * 0.1 + scrollProgress * 5) * 0.1;
          colAttr.array[i * 3]     = baseColor.r * variation;
          colAttr.array[i * 3 + 1] = baseColor.g * variation;
          colAttr.array[i * 3 + 2] = baseColor.b * variation;
        }
        colAttr.needsUpdate = true;

        // Slight scale shift with scroll (geometry spreads out)
        const scale = 1 + scrollProgress * 0.3;
        points.scale.set(scale, scale, scale);

        renderer.render(scene, camera);
      }

      animate();

      // Resize handler
      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      });
    })();

    // =============================================
    // Portal — Entrance Animations
    // =============================================
    (function() {
      const tl = gsap.timeline({ defaults: { ease: 'power3.out' } });

      // Logo SVG draws in (stroke-dashoffset 500 → 0)
      tl.to('.logo-svg', { opacity: 1, duration: 0.3 })
        .to('.logo-svg path, .logo-svg line, .logo-svg circle', {
          strokeDashoffset: 0,
          duration: 1.5,
          stagger: 0.08,
          ease: 'power2.inOut'
        }, '<')
        // Title fades up, staggered per span
        .to('.portal-title', { opacity: 1, duration: 0.1 }, '-=0.8')
        .from('.portal-title span', {
          y: 30,
          opacity: 0,
          duration: 1,
          stagger: 0.15,
          ease: 'power3.out'
        }, '-=0.8')
        // Subtitle fades in
        .to('.portal-subtitle', {
          opacity: 1,
          duration: 0.8,
          ease: 'power2.out'
        }, '-=0.3')
        // Tagline fades in
        .to('.portal-tagline', {
          opacity: 1,
          duration: 1,
          ease: 'power2.out'
        }, '-=0.2')
        // Vertical side text fades in with tagline
        .to('.vertical-text', {
          opacity: 0.4,
          duration: 1,
          ease: 'power2.out'
        }, '<');
    })();

    // =============================================
    // Reveal — Scroll-driven text sequence
    // =============================================
    (function() {
      const revealTl = gsap.timeline({
        scrollTrigger: {
          trigger: '#reveal',
          start: 'top top',
          end: 'bottom bottom',
          scrub: 1
        }
      });

      // First third: line 1 fades in, holds, fades out
      revealTl
        .fromTo('.reveal-line-1',
          { opacity: 0, y: 40 },
          { opacity: 1, y: 0, duration: 1 }
        )
        .to('.reveal-line-1', { opacity: 1, duration: 0.5 })
        .to('.reveal-line-1', { opacity: 0, duration: 0.5 })
        // Second third: line 2 fades in, holds, fades out
        .fromTo('.reveal-line-2',
          { opacity: 0, y: 40 },
          { opacity: 1, y: 0, duration: 1 }
        )
        .to('.reveal-line-2', { opacity: 1, duration: 0.5 })
        .to('.reveal-line-2', { opacity: 0, duration: 0.5 })
        // Final third: line 3 fades in and stays
        .fromTo('.reveal-line-3',
          { opacity: 0, y: 40 },
          { opacity: 1, y: 0, duration: 1 }
        )
        .to('.reveal-line-3', { opacity: 1, duration: 1 });
    })();

    // =============================================
    // Vision — Scroll-animated prose
    // =============================================
    (function() {
      const visionTl = gsap.timeline({
        scrollTrigger: {
          trigger: '#vision',
          start: 'top top',
          end: 'bottom bottom',
          scrub: 1
        }
      });

      visionTl
        // Headline slides in from left
        .fromTo('.vision-content .headline',
          { opacity: 0, x: -60 },
          { opacity: 1, x: 0, duration: 1 }
        )
        // Rule expands from center
        .to('.vision-rule', { scaleX: 1, duration: 0.8 }, '-=0.5')
        // Sub-headline
        .to('.vision-sub', { opacity: 1, duration: 0.8 }, '-=0.3')
        // Paragraphs fade in sequentially
        .to('.vision-para', { opacity: 1, duration: 1, stagger: 0.5 })
        // Dividers
        .to('.vision-divider', { opacity: 1, duration: 0.5, stagger: 0.3 }, '-=1.5')
        // Closing italic with gold glow
        .to('.vision-closing', {
          opacity: 1,
          textShadow: '0 0 30px rgba(255, 171, 0, 0.4)',
          duration: 1.2
        });
    })();

    // =============================================
    // Tribes — Scroll entrance + generative canvas visuals
    // =============================================
    (function() {
      // Scroll entrance
      gsap.to('.tribes-header', {
        opacity: 1,
        duration: 1,
        scrollTrigger: { trigger: '#tribes', start: 'top 80%', scrub: false }
      });

      gsap.to('.tribe-card', {
        opacity: 1,
        scale: 1,
        duration: 0.8,
        stagger: 0.2,
        ease: 'power2.out',
        scrollTrigger: { trigger: '.tribes-grid', start: 'top 85%', scrub: false }
      });

      // --- Tribe canvas animations ---
      const tribeAnimations = {};
      let tribesVisible = false;

      // The Luminous Order: concentric circles, white/gold, slow pulse
      tribeAnimations.luminous = function(ctx, w, h, t) {
        ctx.clearRect(0, 0, w, h);
        const cx = w / 2, cy = h / 2;
        const pulse = 0.8 + Math.sin(t * 0.002) * 0.2;
        for (let i = 6; i >= 1; i--) {
          const r = (i / 6) * 80 * pulse;
          ctx.beginPath();
          ctx.arc(cx, cy, r, 0, Math.PI * 2);
          const alpha = 0.1 + (i / 6) * 0.3;
          ctx.strokeStyle = i % 2 === 0
            ? `rgba(255, 171, 0, ${alpha})`
            : `rgba(245, 245, 245, ${alpha})`;
          ctx.lineWidth = 1;
          ctx.stroke();
        }
        // Radiating lines
        for (let a = 0; a < Math.PI * 2; a += Math.PI / 6) {
          const angle = a + t * 0.0003;
          ctx.beginPath();
          ctx.moveTo(cx + Math.cos(angle) * 20, cy + Math.sin(angle) * 20);
          ctx.lineTo(cx + Math.cos(angle) * 85 * pulse, cy + Math.sin(angle) * 85 * pulse);
          ctx.strokeStyle = 'rgba(255, 171, 0, 0.15)';
          ctx.lineWidth = 0.5;
          ctx.stroke();
        }
      };

      // The Wild Current: chaotic bouncing dots, magenta/orange/cyan
      const wildDots = [];
      for (let i = 0; i < 60; i++) {
        wildDots.push({
          x: Math.random() * 200,
          y: Math.random() * 200,
          vx: (Math.random() - 0.5) * 2,
          vy: (Math.random() - 0.5) * 2,
          color: ['#c2185b', '#e65100', '#00bcd4'][Math.floor(Math.random() * 3)],
          size: 2 + Math.random() * 3
        });
      }
      tribeAnimations.wild = function(ctx, w, h, t) {
        ctx.clearRect(0, 0, w, h);
        wildDots.forEach(d => {
          d.x += d.vx;
          d.y += d.vy;
          if (d.x < 0 || d.x > w) d.vx *= -1;
          if (d.y < 0 || d.y > h) d.vy *= -1;
          // Swirl influence
          const cx = w / 2, cy = h / 2;
          const dx = cx - d.x, dy = cy - d.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          d.vx += (-dy / dist) * 0.02;
          d.vy += (dx / dist) * 0.02;
          // Clamp velocity
          const speed = Math.sqrt(d.vx * d.vx + d.vy * d.vy);
          if (speed > 2.5) { d.vx *= 2.5 / speed; d.vy *= 2.5 / speed; }

          ctx.beginPath();
          ctx.arc(d.x, d.y, d.size, 0, Math.PI * 2);
          ctx.fillStyle = d.color;
          ctx.globalAlpha = 0.7;
          ctx.fill();
          ctx.globalAlpha = 1;
        });
      };

      // The Reclaimers: grid of squares that glitch and rearrange
      tribeAnimations.reclaimers = function(ctx, w, h, t) {
        ctx.clearRect(0, 0, w, h);
        const gridSize = 8;
        const cellW = w / gridSize, cellH = h / gridSize;
        for (let gx = 0; gx < gridSize; gx++) {
          for (let gy = 0; gy < gridSize; gy++) {
            // Glitch offset
            const glitch = Math.sin(t * 0.003 + gx * 3.7 + gy * 2.1) > 0.7;
            const ox = glitch ? (Math.random() - 0.5) * 8 : 0;
            const oy = glitch ? (Math.random() - 0.5) * 8 : 0;
            const x = gx * cellW + 4 + ox;
            const y = gy * cellH + 4 + oy;
            const s = cellW - 8;
            const g = glitch ? 180 + Math.random() * 75 : 100 + Math.random() * 40;
            ctx.fillStyle = `rgba(${Math.floor(g * 0.4)}, ${Math.floor(g)}, ${Math.floor(g * 0.5)}, ${0.3 + Math.random() * 0.3})`;
            ctx.fillRect(x, y, s, s);
          }
        }
      };

      // The Human Witnesses: soft breathing circle, organic warmth
      tribeAnimations.witnesses = function(ctx, w, h, t) {
        ctx.clearRect(0, 0, w, h);
        const cx = w / 2, cy = h / 2;
        const breath = 1 + Math.sin(t * 0.0015) * 0.15;
        const r = 60 * breath;
        // Warm gradient
        const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, r);
        grad.addColorStop(0, 'rgba(210, 160, 130, 0.4)');
        grad.addColorStop(0.6, 'rgba(180, 120, 100, 0.15)');
        grad.addColorStop(1, 'rgba(150, 100, 80, 0)');
        ctx.beginPath();
        ctx.arc(cx, cy, r, 0, Math.PI * 2);
        ctx.fillStyle = grad;
        ctx.fill();
        // Subtle ring
        ctx.beginPath();
        ctx.arc(cx, cy, r * 0.85, 0, Math.PI * 2);
        ctx.strokeStyle = 'rgba(210, 160, 130, 0.2)';
        ctx.lineWidth = 1;
        ctx.stroke();
      };

      // Animation loop for all tribe canvases
      const cards = document.querySelectorAll('.tribe-card');
      function animateTribes(t) {
        if (!tribesVisible) { requestAnimationFrame(animateTribes); return; }
        cards.forEach(card => {
          const tribe = card.dataset.tribe;
          const canvas = card.querySelector('canvas');
          const ctx = canvas.getContext('2d');
          if (tribeAnimations[tribe]) {
            tribeAnimations[tribe](ctx, canvas.width, canvas.height, t);
          }
        });
        requestAnimationFrame(animateTribes);
      }
      requestAnimationFrame(animateTribes);

      // Start animations when section enters viewport
      ScrollTrigger.create({
        trigger: '#tribes',
        start: 'top 90%',
        onEnter: () => { tribesVisible = true; },
        once: true
      });
    })();

    // =============================================
    // Fork — Visual divergence
    // =============================================
    (function() {
      const forkTl = gsap.timeline({
        scrollTrigger: {
          trigger: '#fork',
          start: 'top top',
          end: 'bottom bottom',
          scrub: 1
        }
      });

      // Title fades in first
      forkTl.to('.fork-title', { opacity: 1, duration: 1 })
        // Panels slide apart from center (start overlapping via translateX)
        .fromTo('.fork-panel--table',
          { opacity: 0, x: 80 },
          { opacity: 1, x: 0, duration: 1.5 }, '-=0.3'
        )
        .fromTo('.fork-panel--horizon',
          { opacity: 0, x: -80 },
          { opacity: 1, x: 0, duration: 1.5 }, '<'
        )
        // Labels and teaser text fade in after panels settle
        .to('.fork-panel h3', { opacity: 1, duration: 0.8, stagger: 0.2 })
        .to('.fork-teaser', { opacity: 1, duration: 0.8, stagger: 0.2 }, '-=0.5');
    })();

    // =============================================
    // The Table — 7-movement timeline
    // =============================================
    (function() {
      const tableTl = gsap.timeline({
        scrollTrigger: {
          trigger: '#table',
          start: 'top top',
          end: 'bottom bottom',
          scrub: 1
        }
      });

      // Header fades in with warm glow
      tableTl.to('.table-header', { opacity: 1, duration: 1 })
        // Intro paragraph
        .to('.table-intro', { opacity: 1, duration: 0.8 })
        // Timeline gold line grows downward
        .to('.table-timeline-line', { scaleY: 1, duration: 2 }, '-=0.3')
        // Timeline steps reveal one by one
        .to('.timeline-step', {
          opacity: 1,
          y: 0,
          duration: 0.6,
          stagger: 0.3,
          ease: 'power2.out'
        }, '-=1.5')
        // Closing quotes
        .to('.table-quote', { opacity: 1, duration: 1 });
    })();
  </script>

</body>
</html>
